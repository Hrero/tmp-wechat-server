webpackJsonp([1],{"0+3M":function(t,e){},Azfo:function(t,e){},mKIX:function(t,e){},zKIK:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("2bvH"),s=a("4YfN"),r=a.n(s),i={name:"Users",data:function(){var t=this;return{isShowAdd:!1,isShowConllon:!1,isShowDetail:!1,columns:[{title:"用户ID",key:"_id"},{title:"姓名",key:"name"},{title:"学校",key:"school"},{title:"学生证号码",key:"studentNumber"},{title:"手机号码",key:"phoneNumber"},{title:"创建时间",key:"creatTime",render:function(e,a){return console.log(a.row.creatTime),e("div",t.$dateFormat(a.row.creatTime,"yyyy-MM-dd hh:mm:ss"))}},{title:"操作",slot:"action",width:150,align:"center"}],columns1:[{title:"收藏ID",key:"_id"},{title:"描述",key:"productDes"},{title:"图片",key:"imageUrl",width:"240px",render:function(t,e){var a=[];return e.row.imageUrl[0]&&JSON.parse(e.row.imageUrl).forEach(function(e){a.push(t("img",{attrs:{src:e},style:{width:"60px",borderRadius:"3px",marginRight:"5px"}}))}),t("div",a)}},{title:"手机号码",key:"phoneNumber"},{title:"学校名",key:"schoolName"},{title:"创建时间",key:"creatTime",width:"180px",render:function(e,a){return e("div",t.$dateFormat(a.row.creatTime,"yyyy-MM-dd hh:mm:ss"))}},{title:"状态",key:"status",render:function(t,e){return t("div",e.row.status?"已收藏":"已取消")}}],columns2:[{title:"收藏ID",key:"_id"},{title:"描述",key:"productDes"},{title:"图片",key:"imageUrl",width:"240px",render:function(t,e){var a=[];return e.row.imageUrl[0]&&JSON.parse(e.row.imageUrl).forEach(function(e){a.push(t("img",{attrs:{src:e},style:{width:"60px",borderRadius:"3px",marginRight:"5px"}}))}),t("div",a)}},{title:"手机号码",key:"phoneNumber"},{title:"学校名",key:"schoolName"},{title:"创建时间",key:"creatTime",width:"180px",render:function(e,a){return e("div",t.$dateFormat(a.row.creatTime,"yyyy-MM-dd hh:mm:ss"))}},{title:"状态",key:"status",render:function(t,e){return t("div",e.row.status?"已收藏":"已取消")}}],sellList:[],collectionList:[],params:{pageSize:2,pageNum:1,phoneNumber:""},total:0,styles:{height:"calc(100% - 55px)",overflow:"auto",paddingBottom:"53px",position:"static"},formData:{name:"",school:"",studentNumber:"",phoneNumber:"",openId:""},data:[]}},computed:r()({},Object(o.b)({checkoutStatus:function(t){return t.cart.checkoutStatus}})),methods:{getUserList:function(t){var e=this;this.httpService.getUserList(t).then(function(t){t.code&&(e.data=t.data.data,e.total=t.data.total)})},pageChange:function(t){this.params.pageNum=t,this.getUserList(this.params)},showConllon:function(t){var e=this;this.isShowConllon=!0,this.httpService.getCollectionList({userId:t._id}).then(function(t){t.code&&(e.collectionList=t.data)})},conllonDetail:function(t){var e=this;console.log(t),this.isShowDetail=!0,this.httpService.getUserCmmList({userId:t._id}).then(function(t){t.code&&(e.sellList=t.data)})},hangleSearch:function(){this.getUserList(this.params)},submitAdd:function(){var t=this;for(var e in this.formData)if(void 0===this.formData[e]||""===this.formData[e])return void this.$Message.error(res.msg);this.httpService.addUser(this.formData).then(function(e){e.code?(t.isShowAdd=!1,t.$Message.success(e.msg)):(t.isShowAdd=!1,t.$Message.error(e.msg))})}},mounted:function(){this.getUserList(this.params)}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Users"},[a("div",{staticClass:"left-topSecrch"},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"number",placeholder:"手机号查询"},model:{value:t.params.phoneNumber,callback:function(e){t.$set(t.params,"phoneNumber",e)},expression:"params.phoneNumber"}}),t._v(" "),a("div",{staticClass:"btn1"},[a("Button",{on:{click:t.hangleSearch}},[t._v("查询")])],1)],1),t._v(" "),a("Table",{attrs:{columns:t.columns,data:t.data},scopedSlots:t._u([{key:"action",fn:function(e){var o=e.row;return e.index,[a("div",{staticClass:"btn-class"},[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.conllonDetail(o)}}},[t._v("杂货详情")]),t._v(" "),a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.showConllon(o)}}},[t._v("收藏详情")])],1)]}}])}),t._v(" "),a("div",{staticClass:"page"},[a("Page",{attrs:{total:t.total,current:t.params.pageNum,"page-size":t.params.pageSize},on:{"on-change":t.pageChange}})],1),t._v(" "),a("Drawer",{attrs:{title:"add",width:"720",name:"Drawer",styles:t.styles},model:{value:t.isShowAdd,callback:function(e){t.isShowAdd=e},expression:"isShowAdd"}},[a("Form",{attrs:{model:t.formData,name:"formData"}},[a("FormItem",{attrs:{label:"Name",name:"Name","label-position":"top"}},[a("Input",{attrs:{name:"input1",placeholder:"姓名"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"openId",name:"openId","label-position":"top"}},[a("Input",{attrs:{placeholder:"openId"},model:{value:t.formData.openId,callback:function(e){t.$set(t.formData,"openId",e)},expression:"formData.openId"}})],1),t._v(" "),a("FormItem",{attrs:{label:"school",name:"school","label-position":"top"}},[a("Input",{attrs:{name:"input2",placeholder:"学校"},model:{value:t.formData.school,callback:function(e){t.$set(t.formData,"school",e)},expression:"formData.school"}})],1),t._v(" "),a("FormItem",{attrs:{label:"studentNumber",name:"studentNumber","label-position":"top"}},[a("Input",{attrs:{name:"input3",placeholder:"学号"},model:{value:t.formData.studentNumber,callback:function(e){t.$set(t.formData,"studentNumber",e)},expression:"formData.studentNumber"}})],1),t._v(" "),a("FormItem",{attrs:{label:"phoneNumber",name:"phoneNumber","label-position":"top"}},[a("Input",{attrs:{name:"input4",placeholder:"手机号"},model:{value:t.formData.phoneNumber,callback:function(e){t.$set(t.formData,"phoneNumber",e)},expression:"formData.phoneNumber"}})],1)],1),t._v(" "),a("div",{staticClass:"demo-drawer-footer"},[a("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){t.isShowAdd=!1}}},[t._v("Cancel")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.submitAdd}},[t._v("Submit")])],1)],1),t._v(" "),a("Drawer",{attrs:{title:"add",width:"90%",name:"Drawer",styles:t.styles},model:{value:t.isShowConllon,callback:function(e){t.isShowConllon=e},expression:"isShowConllon"}},[a("Table",{attrs:{columns:t.columns1,data:t.collectionList}})],1),t._v(" "),a("Drawer",{attrs:{title:"add",width:"90%",name:"Drawer",styles:t.styles},model:{value:t.isShowDetail,callback:function(e){t.isShowDetail=e},expression:"isShowDetail"}},[a("Table",{attrs:{columns:t.columns2,data:t.sellList}})],1)],1)},staticRenderFns:[]};var l=a("C7Lr")(i,n,!1,function(t){a("0+3M")},"data-v-37be9276",null).exports,c=a("3cXf"),m=a.n(c),u={name:"ProductList",data:function(){var t=this;return{model:!1,isOnline:"",isShowAdd:!1,columns:[{title:"杂货ID",key:"_id"},{title:"描述",key:"productDes"},{title:"图片",key:"imageUrl",width:"240px",render:function(t,e){var a=[];return e.row.imageUrl[0]&&JSON.parse(e.row.imageUrl).forEach(function(e){a.push(t("img",{attrs:{src:e},style:{width:"60px",borderRadius:"3px",marginRight:"5px"}}))}),t("div",a)}},{title:"手机号码",key:"phoneNumber"},{title:"学校名",key:"schoolName"},{title:"学校ID",key:"schoolId"},{title:"创建时间",key:"creatTime",width:"180px",render:function(e,a){return e("div",t.$dateFormat(a.row.creatTime,"yyyy-MM-dd hh:mm:ss"))}},{title:"状态",key:"status",render:function(e,a){return t.isOnline=a.row.status?"下线":"上线",e("div",a.row.status?"上线中":"待审核")}},{title:"操作",slot:"action",width:150,align:"center"}],data:[],imageList:[],params:{pageSize:2,pageNum:1,phoneNumber:""},total:0,formData:{status:0}}},computed:r()({},Object(o.b)({checkoutStatus:function(t){return t.cart.checkoutStatus}})),methods:{getCommodityList:function(t){var e=this;this.httpService.getCommodityList(t).then(function(t){t.code?(e.data=t.data.data,e.total=t.data.total):e.$Message.error(t.msg)})},handleSuccess:function(t){0===t.code?this.imageList.push(t.data.img):console.log(t.msg)},submitAdd:function(){var t=this;this.formData.imageUrl=m()(this.imageList),this.httpService.handleAddcommodity(this.formData).then(function(e){e.code?(t.getCommodityList(t.params),t.isShowAdd=!1,t.$Message.success(e.msg)):t.$Message.error(e.msg)})},pageChange:function(t){this.params.pageNum=t,this.getCommodityList(this.params)},hangleSearch:function(){this.getCommodityList(this.params)},show:function(t){var e=this;this.httpService.handleEditStatus({commdityId:t._id,status:0===t.status?1:0}).then(function(t){t.code?(e.getCommodityList(),e.$Message.success(t.msg)):e.$Message.error(t.msg)})}},mounted:function(){this.getCommodityList(this.params)}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ProductList"},[a("div",{staticClass:"topSecrch"},[a("div",{staticClass:"left-topSecrch"},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"number",placeholder:"手机号查询"},model:{value:t.params.phoneNumber,callback:function(e){t.$set(t.params,"phoneNumber",e)},expression:"params.phoneNumber"}}),t._v(" "),a("div",{staticClass:"btn1"},[a("Button",{on:{click:t.hangleSearch}},[t._v("查询")])],1)],1),t._v(" "),a("div",{staticClass:"btn"},[a("Button",{on:{click:function(e){t.isShowAdd=!0}}},[t._v("新增商品")])],1)]),t._v(" "),a("Table",{attrs:{columns:t.columns,data:t.data},scopedSlots:t._u([{key:"action",fn:function(e){var o=e.row;return e.index,[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.show(o)}}},[t._v(t._s(t.isOnline))])]}}])}),t._v(" "),a("div",{staticClass:"page"},[a("Page",{attrs:{total:t.total,current:t.params.pageNum,"page-size":t.params.pageSize},on:{"on-change":t.pageChange}})],1),t._v(" "),a("Drawer",{attrs:{title:"add",width:"720",name:"Drawer"},model:{value:t.isShowAdd,callback:function(e){t.isShowAdd=e},expression:"isShowAdd"}},[a("Form",{staticClass:"top",attrs:{model:t.formData,name:"formData"}},[a("FormItem",{attrs:{label:"productDes",name:"productDes","label-position":"top"}},[a("Input",{attrs:{name:"input1",placeholder:"描述"},model:{value:t.formData.productDes,callback:function(e){t.$set(t.formData,"productDes",e)},expression:"formData.productDes"}})],1),t._v(" "),a("FormItem",{attrs:{label:"schoolName",name:"school","label-position":"top"}},[a("Input",{attrs:{name:"input2",placeholder:"学校"},model:{value:t.formData.schoolName,callback:function(e){t.$set(t.formData,"schoolName",e)},expression:"formData.schoolName"}})],1),t._v(" "),a("FormItem",{attrs:{label:"schoolId",name:"schoolId","label-position":"top"}},[a("Input",{attrs:{name:"input2",placeholder:"学校id"},model:{value:t.formData.schoolId,callback:function(e){t.$set(t.formData,"schoolId",e)},expression:"formData.schoolId"}})],1),t._v(" "),a("FormItem",{attrs:{label:"userId",name:"userId","label-position":"top"}},[a("Input",{attrs:{name:"input2",placeholder:"用户id"},model:{value:t.formData.userId,callback:function(e){t.$set(t.formData,"userId",e)},expression:"formData.userId"}})],1),t._v(" "),a("FormItem",{attrs:{label:"studentNumber",name:"studentNumber","label-position":"top"}},[a("Input",{attrs:{name:"input3",placeholder:"学号"},model:{value:t.formData.studentNumber,callback:function(e){t.$set(t.formData,"studentNumber",e)},expression:"formData.studentNumber"}})],1),t._v(" "),a("FormItem",{attrs:{label:"status",name:"status","label-position":"top"}},[a("Input",{attrs:{name:"input3",placeholder:"状态"},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}})],1),t._v(" "),a("FormItem",{attrs:{label:"phoneNumber",name:"phoneNumber","label-position":"top"}},[a("Input",{attrs:{name:"input4",placeholder:"手机号"},model:{value:t.formData.phoneNumber,callback:function(e){t.$set(t.formData,"phoneNumber",e)},expression:"formData.phoneNumber"}})],1),t._v(" "),a("Upload",{attrs:{action:"/api/image/upload","on-success":t.handleSuccess}},[a("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传图片")])],1)],1),t._v(" "),t._l(t.imageList,function(t,e){return a("div",{key:e},[a("img",{staticClass:"smallPic",attrs:{src:t,alt:""}})])}),t._v(" "),a("div",{staticClass:"demo-drawer-footer"},[a("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){t.isShowAdd=!1}}},[t._v("Cancel")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.submitAdd}},[t._v("Submit")])],1)],2)],1)},staticRenderFns:[]};var p={name:"home",components:{ProductList:a("C7Lr")(u,d,!1,function(t){a("Azfo")},"data-v-a3810480",null).exports,Users:l}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"body-container"},[e("Tabs",{attrs:{value:"user"}},[e("TabPane",{attrs:{label:"用户",name:"user"}},[e("Users")],1),this._v(" "),e("TabPane",{attrs:{label:"商品",name:"product"}},[e("ProductList")],1)],1)],1)},staticRenderFns:[]};var f=a("C7Lr")(p,h,!1,function(t){a("mKIX")},"data-v-e1de4c40",null);e.default=f.exports}});
//# sourceMappingURL=1.af55aedd1f16a14d51f7.js.map